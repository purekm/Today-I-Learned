# 메모리 기술 개요

## 현대의 메모리 기술

### SRAM (Static Random Access Memory)
- **특징**: 매우 빠른 접근 속도를 제공하지만, 저장 용량이 작고 가격이 비쌈.
- **용도**: 주로 캐시 메모리로 사용됨.

### DRAM (Dynamic Random Access Memory)
- **특징**: SRAM보다 느리지만, 더 큰 저장 용량을 제공하며, 상대적으로 저렴함.
- **용도**: 주 메모리(RAM)로 널리 사용됨.

### SSD (Solid State Drive)
- **특징**: 빠른 읽기/쓰기 속도와 높은 신뢰성을 제공하며, HDD에 비해 가격이 높음.
- **용도**: 주로 운영 체제와 애플리케이션 설치 및 실행에 사용됨.

### HDD (Hard Disk Drive)
- **특징**: 저장 용량이 매우 크고 가격이 저렴하지만, 읽기/쓰기 속도가 느림.
- **용도**: 대용량 데이터 저장에 사용됨.

## 차세대 메모리 기술

### PCM (Phase-Change Memory)
- **특징**: 비휘발성 메모리로, 빠른 속도와 높은 내구성을 제공하며, DRAM과 플래시 메모리의 장점을 결합함.

### STT-MRAM (Spin-Transfer Torque Magnetic RAM)
- **특징**: 비휘발성 메모리로, 높은 속도와 무한에 가까운 쓰기 내구성을 제공함. 현재 DRAM의 대체 기술로 주목받고 있음.

### DNA 저장
- **특징**: 매우 높은 데이터 밀도를 제공하는 새로운 저장 기술로, DNA 분자를 이용하여 데이터를 저장함. 현재 연구 단계에 있으며, 미래의 대용량 데이터 저장 솔루션으로 기대됨.

## 휘발성 메모리 vs 비휘발성 메모리

### 휘발성 메모리
- **SRAM**: 빠르지만 저장 공간이 작음.
- **DRAM**: 상대적으로 빠르고, 저장 공간이 큼.

### 비휘발성 메모리
- **SSD**: 빠르며, 신뢰성이 높지만 가격이 비쌈.
- **HDD**: 느리지만, 매우 큰 저장 공간을 저렴하게 제공함.

## Storage Hierarchy
단일 메모리는 빠르고 저장 공간이 크도록 만드는 것이 불가능하기 때문에, **Storage Hierarchy**를 통해 이러한 단점을 극복함. 이를 통해 사용자에게는 빠르면서도 저장 공간이 큰 것처럼 느껴지도록 함. 다양한 계층의 메모리를 조합하여 최적의 성능과 용량을 제공함.

---

# Host – Storage System

## Host 시스템
- **구성 요소**:
  - **하드웨어**: Processor, SRAM, DRAM
  - **소프트웨어**: OS, device driver
- **역할**: 사용자가 실행하는 애플리케이션을 포함하며, 하드웨어와 소프트웨어를 통해 저장 시스템과 데이터를 주고받음.

## Storage 시스템
- **구성 요소**: SSD, HDD 등 데이터를 영구적으로 저장하는 장치들.
- **역할**: 영구 데이터를 저장하며, 필요 시 Host 시스템에서 I/O 요청을 통해 데이터를 읽고 씀.

## 호스트 시스템과 저장 시스템의 연결

### 물리적 연결
- **인터페이스**: SATA, PCIe와 같은 연결 방식을 사용하여 호스트와 저장 장치를 물리적으로 연결함.

### 통신 프로토콜
- **프로토콜**: NVMe와 같은 프로토콜을 사용하여 저장 장치와 고속으로 데이터를 주고받음.

### 전체 흐름
1. **앱 실행**: 앱이 실행되면, 운영 체제(OS)의 파일 시스템을 통해 저장된 데이터에 접근함.
2. **데이터 처리**: 프로세서와 메모리는 필요한 데이터를 빠르게 처리하도록 관리함.
3. **데이터 저장**: 저장 장치는 영구적인 데이터를 보관하며, 필요 시 데이터를 읽고 씀.
4. **메모리 접근**: 앱이 실행되는 동안, 필요한 데이터를 메모리에서 읽어오거나 새로운 데이터를 저장함.

### Host 메모리 시스템과 Storage 시스템의 연계
- Host 메모리 시스템(SRAM, DRAM)에서 용량이 부족한 경우, 나머지 데이터는 Storage 시스템에 저장됨. Storage 시스템에 저장된 데이터를 요청하면, Storage 시스템에서 데이터를 읽어오는 과정이 발생함.

---

# I/O 요청의 생성 과정

1. **System Call 호출**: 어플리케이션이 데이터를 읽거나 쓰기 위해 시스템 호출을 발생시킴.
2. **가상 파일 시스템(VFS)**: 다양한 파일 시스템을 통합 관리하며, 시스템 호출을 받아 실제 파일 시스템에 맞게 변환함.
3. **파일 시스템 요청 변환**: 요청을 실제 물리적 저장 위치로 변환함.
4. **Block I/O 요청 생성**: 물리적 저장 위치가 결정된 후 Block I/O 요청이 생성됨.
5. **I/O 스케줄링**: I/O 스케줄러가 성능 최적화를 위해 여러 I/O 요청을 묶거나 재정렬함.
6. **블록 장치 드라이버**: I/O 요청을 실제 저장 장치에 전달함.

### I/O 요청의 주요 필드
- **bi_bdev**: I/O 요청이 수행될 대상 블록 장치.
- **bi_opf**: read/write와 같은 operation 타입.
- **bi_iter**:
  - **bi_sector**: 512바이트 중 device address.
  - **bi_size**: I/O의 크기.
  - **bi_idx**: 현재 인덱스.
  - **bi_bvec_done**: 현재 bvec에서 완료된 바이트의 수.
- **bio_io_vec**:
  - **bv_page**: 데이터가 저장된 페이지.
  - **bv_len**: 데이터 길이.
  - **bv_offset**: 페이지 시작 위치.

---
