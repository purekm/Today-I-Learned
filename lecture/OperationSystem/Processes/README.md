
---

# Chapter 3 - Overview

## Objectives
1. 프로세스의 개별 구성 요소 식별하고, 그것들이 운영 체제에서 어떻게 표현되고 스케줄 되는지 설명
2. 운영 체제에서 프로세스가 어떻게 생성되고 종료되는지 설명
3. 공유 메모리와 메시지 전달을 사용한 프로세스 간 통신 설명
4. 파이프와 POSIX 공유 메모리를 사용하여 프로세스 간 통신하는 법 설명

## Process
프로세스는 실행 중인 프로그램으로, 프로세스의 실행은 순차적으로 진행되어야 함

### 구성 요소
1. **Program Code (Text Section)**: 실행할 프로그램 코드임
2. **Program Counter (PC) and Registers**: 현재 실행 중인 명령어의 주소와 레지스터 상태를 포함함
3. **Stack**: 함수 매개변수, 반환 주소, 지역 변수를 포함한 임시 데이터를 저장함
4. **Data Section**: 전역 변수를 포함함
5. **Heap**: 실행 중 동적으로 할당된 메모리를 포함함

### 프로그램과 프로세스의 차이점
- **프로그램**: 디스크에 저장된 실행 파일임
- **프로세스**: 메모리에 로드되어 활성 상태인 프로그램임

### 프로세스 상태
프로세스의 상태에는 5가지 상태가 존재함:
1. **New**: 프로세스가 생성됨
2. **Running**: 명령어가 실행 중임
3. **Waiting**: 특정 이벤트를 기다림
4. **Ready**: CPU 할당을 기다림
5. **Terminated**: 프로세스 실행이 완료됨
![image](https://github.com/purekm/Today-I-Learned/assets/90774046/25892340-8ecc-47cc-85bc-a4dbc459efdf)

### Process Control Block (PCB)
프로세스와 관련된 정보들을 포함한 블록으로, 운영 체제가 각 프로세스를 관리하는 데 사용됨:
1. **프로세스 상태**: 현재 프로세스의 상태를 저장함
2. **Program Counter (PC)**: 다음에 실행될 명령어의 위치를 저장함
3. **CPU Register**: 프로세스가 실행 중이던 레지스터의 내용을 저장함
4. **CPU 스케줄링 정보**: 우선순위, 스케줄링 큐 포인터 등을 포함함
5. **메모리 관리 정보**: 프로세스의 주소 공간을 관리함

### Threads
스레드는 프로세스 내에 있는 실행의 한 흐름으로, 스레드끼리는 자원을 공유함

## Process Scheduling
프로세스 스케줄링은 CPU 사용을 최대화하고 프로세스를 신속하게 전환하기 위해 사용됨  
프로세스 스케줄러는 실행 가능한 프로세스를 선택하고, 준비 큐와 대기 큐를 관리함  
이러한 메커니즘은 시스템의 효율성을 높이는 데 필수적임

## Context Switch
Context switch는 여러 프로세스가 동시에 실행되는 환경에서 CPU가 자원을 공정하게 분배하기 위해 필요함  
CPU가 한 프로세스에서 다른 프로세스로 전환될 때, 이전 프로세스의 상태를 PCB에 저장하고, 다음에 실행될 프로세스의 PCB에서 정보를 읽어와 CPU 레지스터와 PC에 로드함  
이후 스케줄러가 다음에 실행할 프로세스를 선택함

## Process Creation
프로세스는 기존 프로세스에 의해 생성되며, 생성된 프로세스를 자식 프로세스라 함  
부모 프로세스는 자식 프로세스를 생성하여 프로세스 트리를 형성하고, 계층 구조를 나타냄

### 자원 공유 옵션
1. 부모와 자식이 모든 자원을 공유함
2. 자식이 부모 자원의 일부를 공유함
3. 부모와 자식이 자원을 공유하지 않음

### 실행 옵션
1. 부모와 자식이 동시에 실행됨
2. 부모가 자식 종료를 대기함

### 시스템 호출
- **fork()**: 새로운 프로세스를 생성함
- **exec()**: 자식 프로세스의 메모리 공간을 새로운 프로그램으로 교체함
- **wait()**: 부모 프로세스가 자식 프로세스가 종료될 때까지 대기함
- **exit()**: 마지막 명령어를 실행한 후 운영 체제에 종료를 요청함

### 프로세스 종료
부모 프로세스는 자식 프로세스를 강제로 종료할 수 있음:
1. 자식 프로세스가 할당된 자원을 초과 사용한 경우
2. 자식 프로세스의 작업이 더 이상 필요하지 않은 경우
3. 부모 프로세스가 종료될 때 운영 체제가 자식 프로세스의 실행을 허용하지 않음

### 프로세스 상태
- **고아 프로세스**: 부모 프로세스가 종료되었으나 자식이 아직 종료되지 않은 상태임
- **좀비 프로세스**: 자식 프로세스가 종료되었으나, 부모 프로세스가 wait()을 호출하지 않은 상태임

### 안드로이드 프로세스 관리
안드로이드는 시스템 리소스를 회수해야 하는 상황에서 중요도가 낮은 프로세스를 우선적으로 종료함
![image](https://github.com/purekm/Today-I-Learned/assets/90774046/2b81eacb-2af3-40fa-8631-60144c71fcbe)

## 프로세스 간 통신 (Interprocess Communication, IPC)
### 공유 메모리 (Shared Memory)
프로세스들이 메모리 공간을 공유하여 데이터를 교환함

### 메시지 전달 (Message Passing)
프로세스들이 메시지를 주고받는 방식으로 데이터를 교환함

### 파이프 (Pipes)
파이프는 두 프로세스 간의 통신을 가능하게 하는 도구임  
파이프는 일반적으로 부모-자식 관계의 프로세스 간 통신에 사용되며, 보통 단방향으로 동작함

### POSIX 공유 메모리 (POSIX Shared Memory)
POSIX API를 사용하여 공유 메모리 세그먼트를 생성하고, 이 메모리를 통해 프로세스 간 데이터를 교환함  
프로세스는 `shm_open()`으로 공유 메모리 세그먼트를 생성하고, `mmap()`을 사용하여 메모리를 매핑함으로써 공유 메모리에 접근함

---

